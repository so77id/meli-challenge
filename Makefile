# Definir el nombre de la imagen
IMAGE_NAME=jupyter_env

# Puerto local para acceder a Jupyter Notebook
PORT=8888

# URL desde donde descargar el archivo models.zip
MODELS_FILENAME=models.zip
# URL desde donde descargar el archivo data.zip
DATA_FILENAME=MLA_100k_checked_v3.jsonlines

build:
	docker build -t $(IMAGE_NAME) ./dockerfiles/.

run-jupyter:
	docker run -p $(PORT):8888 -v "${PWD}:/home/jovyan/work" $(IMAGE_NAME)

init:
	# Descargar y preparar los modelos
	# mkdir -p ./models
	# wget --header="Host: drive.usercontent.google.com" --header="User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" --header="Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8" --header="Accept-Language: en-GB,en;q=0.8" --header="Cookie: SID=g.a000fwgp0FG2YxxX6qgI4zuHtRnxx1xoGm_5AmWOKrPIqvTfC23GAxbvb-V66UT_ANevciljfQACgYKAQISAQASFQHGX2Mitjkq6vSgMkr_HW70TR8tgBoVAUF8yKrIouEKC8b0RZdWrGDGfvCI0076; __Secure-1PSID=g.a000fwgp0FG2YxxX6qgI4zuHtRnxx1xoGm_5AmWOKrPIqvTfC23Gcnd6N2pbogTmlynnJmOAXgACgYKAbcSAQASFQHGX2MivRTYymPKNqDMKi36IPhmNBoVAUF8yKpes9m6fCUmAOipqpAvjU630076; __Secure-3PSID=g.a000fwgp0FG2YxxX6qgI4zuHtRnxx1xoGm_5AmWOKrPIqvTfC23GkHTRNpEFGYVhLnHdw24_kQACgYKAZ0SAQASFQHGX2MifMPRUl_ijco_RmowdK2tlRoVAUF8yKqOrKlL1mGpYHOskf0hedFC0076; HSID=AeLQZfRy7duR15F9z; SSID=Ales1aPoHoIfPi3HD; APISID=A8h_PQcUqgijuBc3/AklmZ0rqChq3Al1Hs; SAPISID=lPOAPC0rS6wdNrpW/AkBIEzDNEQcH4Vwea; __Secure-1PAPISID=lPOAPC0rS6wdNrpW/AkBIEzDNEQcH4Vwea; __Secure-3PAPISID=lPOAPC0rS6wdNrpW/AkBIEzDNEQcH4Vwea; AEC=Ae3NU9MnPTnZMX-ci8_hLWji_2K3TqkIAn73KLrGgKCKD5D3LzeTqQNqfg; 1P_JAR=2024-02-13-20; NID=511=EM2bOO0Zt9cZ27Wq1-lrSZ2IWG7UIWMwM9zUPWvbQm2Rs_cWZoQoJLIrswKFjAy6zunsfvuCtpos3sd15CAyGHP9Odg1_kyKp2TfNn0gmGvkTViJ4ZwJXc8KO69CPVT_3LZOWcd-IY-PZWFvrGkPh4E0PAcrSPSGuvW7B6eEXQNKxbuqG-70bD5WKY7wrfcfNrHaLVmvquqKr4mUYLG02MB6OfMcvm9BFCGNbnIpIldwtXUOxsc54MxKOLi5Xs00azClCfdsxgF7Y_xsui7M8q1kcqs7hWLzkHoROz9l7ihgaLZOQIWRXLK38xvSDVNIVMLFXnR3eZbGrXyMECTaHBmSBuwdRjEY0doDnXpDF8Z7Bt-ylPZwgukRxEfa4HOHhGGc70uv_7brb85Z2xZ61TJyNjs4WqmBUE4iwKc_QoaHl-R7WcuPvajgriAdbD6rYq7PSiPYx4yz8I9MPrhGFyFVRI3M8yrSFvdVXUQCsCk0qKbqVGa23kU8Mwzp_ucj_sNNuPB_tj4M8s3EkGiR1YSH0FR5AnAq-wnxr7gPzdh_pNpduSj1bKxfjkTF5eYgvMv7LGwc4QlOhMZ3kPj2rV4joAxuMF3BM7ORuHlhGkTF7lv66qW8fAd-XOQ1KCAISRUZ6t9ErQ3wVRj41Ytdra4b9tOFPPwgYsHHMFkcrfjVnyA5mOqAptJaXy1zA7h0odswM41meIiQQPQJYzFmbb8ZQ5bAwWRYzWyS1fn03X5DrP7sMeakUNFy84HxdyyNhCAGtwoyRkGJPxnd-91uSDOtDgutiNJs6GEVMkh8vW4dQ9xLqzgPotVGBue163s2; __Secure-ENID=17.SE=tWvWst5JQKIaRimeewYBQqATTEI-f1JTbydghG1XP29iI6YF9THH3SNXGlA3ynwMneIr61SWpjb_TAad3NHeIP3HhsPDNxg4wAwlR6qdzUJqiHPGg-caVESfKQVSyU9nWMQxah3Mc2oT3hLis-INgDDEdZJXBXy4huNxtbCBJvfKvAth44zNcosE-eszRGky99rIZ1DWdgE0ii4m8JhlUcV-xlVyEHE6ZflBiuaakfCkPW6-a0sQGdW8_oq0hX7fI4qvGzSovW24rnEx-trt4OtUxCYvg8LebOkLC_s_dniU1mxXAuPEctrjJtrKPNP59gSeqtxOZw5EbsJGG1gybHi-p1h9SZ94lDHE_tFO09JSwu0; __Secure-1PSIDTS=sidts-CjIBYfD7Z2UORlcxSm2wDMTiGzz9_Vhs79pZ6CNQr68TaTVDTEdBWEzwHJape5SFa5LMphAA; __Secure-3PSIDTS=sidts-CjIBYfD7Z2UORlcxSm2wDMTiGzz9_Vhs79pZ6CNQr68TaTVDTEdBWEzwHJape5SFa5LMphAA; SIDCC=ABTWhQFavplwCn1LApyIZStONoIaqTpRKB4Ya9S-Fa3pm-OPYj1HKWAmSN80DmpCmrWoJucxYmQ; __Secure-1PSIDCC=ABTWhQEuNkyGLTZtJrFPAYu3lsHInIEDpsSIJhyoygIc05rWSwtGzYYqXtx99ndzBizLmSZeRMY; __Secure-3PSIDCC=ABTWhQHTJ7qSbPXWiXV57gftubXbvzDU6hi_BmQMcrPnEwsDHVCMWrcp40NA0ram4bLYrnBdeLg" --header="Connection: keep-alive" "https://drive.usercontent.google.com/download?id=1psVx7vYvzDGj98NnwZHqcr0rZO2bOzT8&export=download&authuser=0&confirm=t&uuid=ed6cbca7-260b-4af9-a792-1394509a19a5&at=APZUnTX9RYhvUII1f2M4d9rcY1pS%3A1707855369525" -c -O $(MODELS_FILENAME)
	# unzip $(MODELS_FILENAME) -d ./models
	# rm $(MODELS_FILENAME)

	# Descargar y preparar los datos
	mkdir -p ./data
	wget --header="Host: drive.usercontent.google.com" --header="User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" --header="Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8" --header="Accept-Language: en-GB,en;q=0.8" --header="Cookie: SID=g.a000fwgp0FG2YxxX6qgI4zuHtRnxx1xoGm_5AmWOKrPIqvTfC23GAxbvb-V66UT_ANevciljfQACgYKAQISAQASFQHGX2Mitjkq6vSgMkr_HW70TR8tgBoVAUF8yKrIouEKC8b0RZdWrGDGfvCI0076; __Secure-1PSID=g.a000fwgp0FG2YxxX6qgI4zuHtRnxx1xoGm_5AmWOKrPIqvTfC23Gcnd6N2pbogTmlynnJmOAXgACgYKAbcSAQASFQHGX2MivRTYymPKNqDMKi36IPhmNBoVAUF8yKpes9m6fCUmAOipqpAvjU630076; __Secure-3PSID=g.a000fwgp0FG2YxxX6qgI4zuHtRnxx1xoGm_5AmWOKrPIqvTfC23GkHTRNpEFGYVhLnHdw24_kQACgYKAZ0SAQASFQHGX2MifMPRUl_ijco_RmowdK2tlRoVAUF8yKqOrKlL1mGpYHOskf0hedFC0076; HSID=AeLQZfRy7duR15F9z; SSID=Ales1aPoHoIfPi3HD; APISID=A8h_PQcUqgijuBc3/AklmZ0rqChq3Al1Hs; SAPISID=lPOAPC0rS6wdNrpW/AkBIEzDNEQcH4Vwea; __Secure-1PAPISID=lPOAPC0rS6wdNrpW/AkBIEzDNEQcH4Vwea; __Secure-3PAPISID=lPOAPC0rS6wdNrpW/AkBIEzDNEQcH4Vwea; SEARCH_SAMESITE=CgQIqpoB; AEC=Ae3NU9MnPTnZMX-ci8_hLWji_2K3TqkIAn73KLrGgKCKD5D3LzeTqQNqfg; 1P_JAR=2024-02-13-20; NID=511=EM2bOO0Zt9cZ27Wq1-lrSZ2IWG7UIWMwM9zUPWvbQm2Rs_cWZoQoJLIrswKFjAy6zunsfvuCtpos3sd15CAyGHP9Odg1_kyKp2TfNn0gmGvkTViJ4ZwJXc8KO69CPVT_3LZOWcd-IY-PZWFvrGkPh4E0PAcrSPSGuvW7B6eEXQNKxbuqG-70bD5WKY7wrfcfNrHaLVmvquqKr4mUYLG02MB6OfMcvm9BFCGNbnIpIldwtXUOxsc54MxKOLi5Xs00azClCfdsxgF7Y_xsui7M8q1kcqs7hWLzkHoROz9l7ihgaLZOQIWRXLK38xvSDVNIVMLFXnR3eZbGrXyMECTaHBmSBuwdRjEY0doDnXpDF8Z7Bt-ylPZwgukRxEfa4HOHhGGc70uv_7brb85Z2xZ61TJyNjs4WqmBUE4iwKc_QoaHl-R7WcuPvajgriAdbD6rYq7PSiPYx4yz8I9MPrhGFyFVRI3M8yrSFvdVXUQCsCk0qKbqVGa23kU8Mwzp_ucj_sNNuPB_tj4M8s3EkGiR1YSH0FR5AnAq-wnxr7gPzdh_pNpduSj1bKxfjkTF5eYgvMv7LGwc4QlOhMZ3kPj2rV4joAxuMF3BM7ORuHlhGkTF7lv66qW8fAd-XOQ1KCAISRUZ6t9ErQ3wVRj41Ytdra4b9tOFPPwgYsHHMFkcrfjVnyA5mOqAptJaXy1zA7h0odswM41meIiQQPQJYzFmbb8ZQ5bAwWRYzWyS1fn03X5DrP7sMeakUNFy84HxdyyNhCAGtwoyRkGJPxnd-91uSDOtDgutiNJs6GEVMkh8vW4dQ9xLqzgPotVGBue163s2; __Secure-ENID=17.SE=tWvWst5JQKIaRimeewYBQqATTEI-f1JTbydghG1XP29iI6YF9THH3SNXGlA3ynwMneIr61SWpjb_TAad3NHeIP3HhsPDNxg4wAwlR6qdzUJqiHPGg-caVESfKQVSyU9nWMQxah3Mc2oT3hLis-INgDDEdZJXBXy4huNxtbCBJvfKvAth44zNcosE-eszRGky99rIZ1DWdgE0ii4m8JhlUcV-xlVyEHE6ZflBiuaakfCkPW6-a0sQGdW8_oq0hX7fI4qvGzSovW24rnEx-trt4OtUxCYvg8LebOkLC_s_dniU1mxXAuPEctrjJtrKPNP59gSeqtxOZw5EbsJGG1gybHi-p1h9SZ94lDHE_tFO09JSwu0; __Secure-1PSIDTS=sidts-CjIBYfD7Z8eGgGfIwVimAAZ5aqcPhHNJnX2m7OabXVae2lSSChFcmfzhlhRWTZz0qz3aEBAA; __Secure-3PSIDTS=sidts-CjIBYfD7Z8eGgGfIwVimAAZ5aqcPhHNJnX2m7OabXVae2lSSChFcmfzhlhRWTZz0qz3aEBAA; SIDCC=ABTWhQEPT5thQlcRTqga_7FS1rMvM4coqni3jxIwyEfK7hSCzaQNU9Lkf-1NhsylqHv7TTVkTX8; __Secure-1PSIDCC=ABTWhQE80gBD6Nuos-a4a4Ct3VD_xWxuL-AMB8O9GfKuEBZBVE4RlTPhddiPw3ZGGTDhJeb7cJE; __Secure-3PSIDCC=ABTWhQHezeJvMMfinwWba-B9YmBq1eTrHyMOr6IEdo4JDDNgj5AcPZzVFrktdd5YkipNd_F33pM" --header="Connection: keep-alive" "https://drive.usercontent.google.com/download?id=1UB5yRPOzYI1ewKYPbcDcwCmpATI0MD_P&export=download&authuser=0&confirm=t&uuid=335022cc-2a0e-4e6c-83ff-03d0799d3094&at=APZUnTWYZc9ZPVhpcsXXRzWiIVHL:1707855843504" -c -O $(DATA_FILENAME)
	mv $(DATA_FILENAME) ./data
